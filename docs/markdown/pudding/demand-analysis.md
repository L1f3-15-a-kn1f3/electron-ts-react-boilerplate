# 现有框架的问题

通过对组内现有的客户端项目的分析，整理了一些在金融小组项目中发现的问题

## 协作方面

- 没有规范化的 git commit 约定，commit 记录比较随意，查阅时不方便快速定位

- 代码格式化方案不统一，commit 后代码如果冲突，解决冲突时对比代码很困难

- 没有集成组件可视化文档，项目内的明明封装了很多组件，但是不去看组件逻辑没人知道组件的作用，这会导致有些时候疲于查阅，在明明有了其他同学写好的现成的组件情况下，却又写了一遍实现

- 没有可视化 API 方法文档， 与组件情况类似，全局对象上挂载的工具方法，每次使用都需要重新查看内部的逻辑才知道怎么用，所以同样作用的方法却可能存在来自不同成员的实现

## 效率方面

- 没有单命令启动，每次启动开发服务都需要启动多个 terminal，跑多条命令后启动开发服务，比较繁琐

- 修改主进程 main.js 的代码后，必须手动重启 electron 进程，没有实现监听 main.js 改变后自动启动的功能

- 修改代码后项目重新的打包的时间长(当然这一定程度上取决于项目代码量有关，但跟打包优化策略也有很强的因果性)，频繁等待影响开发效率

- 没有 hmr(模块热替换)， 每次改动代码经过漫长的重新打包后还需要手动刷新页面，且页面状态会丢失，这导致在调试过程中，填满数据的表单或者中间步骤的页面又要重新填写一遍，非常影响开发效率

## 性能方面

- electron 项目中主进程代码中包含的 node_modules 在发布时不经过打包，而且完整发布上线，这是导致我们业务代码体积明明很小，但是客户端体积巨大的原因之一

- 引入的许多庞大的第三方的 npm 包（例如只用到少数几个 api 的 loadsh、moment 等库），没有按需引入或者在打包时进行 tree shaking, 同样导致了客户端体积庞大

## 扩展性方面

- electron、webpack、react 等基础设施老化，react 新特性语法也无法支持，同时引入新的插件或者 npm 包容易存在不兼容或者打包后存在语法不支持的问题，解决起来比较费力
